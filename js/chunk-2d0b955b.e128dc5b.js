(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b955b"],{3305:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("VContainer",[s("VRow",[s("VCol",{attrs:{cols:"12"}},[s("AdminProgressCard",{attrs:{hidden:""==e.progressColor,title:""+e.progressTask.task_name,value:e.progressTask.current_value,"small-value":e.progressTask.total_value,"sub-text":e.progressTask.msg,"sub-icon":"mdi-calendar","sub-text-color":e.progressColor,color:e.progressColor}})],1)],1),s("VRow",[s("VCol",[s("VDataTable",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.progressTasks,"items-per-page":20}})],1)],1)],1)},r=[],n=(s("4160"),s("b680"),s("ac1f"),s("5319"),s("159b"),s("340b")),o=s("f2d3"),i={data:function(){return{progressTask:Object(),progressTasks:Array(),headers:[{text:"计划任务名称",value:"taskName"},{text:"服务器名称",value:"computerName"},{text:"距离上次运行",value:"distanceTime"},{text:"上次运行耗时",value:"lastTime"},{text:"状态",value:"msg"}],authorListLength:"",videoListLength:""}},computed:{progressColor:function(){switch(null!=this.progressTask&&this.progressTask.status){case 9:return"green";case 4:return"red";case 2:return"orange";default:return""}}},mounted:function(){var e=this;this.getLatestTaskInfo(),this.axios("/tracer/progress-task").then((function(t){e.progressTasks=t.data.content,e.progressTasks.forEach((function(t){t["lastTime"]=e.lastTime(t.startTime,t.updateTime),t["distanceTime"]=e.lastTime(t.startTime.replace("+00:00",""),new Date)}))})),this.axios("/tracer/author-queue").then((function(t){e.authorListLength=String(t.data.length)})),this.axios("/tracer/video-queue").then((function(t){e.videoListLength=String(t.data.length)}));var t=setInterval(this.getLatestTaskInfo,5e3);this.$once("hook:beforeDestroy",(function(){clearInterval(t)}))},methods:{lastTime:function(e,t){return Object(n["distanceInWords"])(e,t,{locale:o})},getStatus:function(e){return"0"===e?"队列空闲中":"正在消化爬取队列"},getColor:function(e){return"0"===e||""===e?"green":"orange"},updateTask:function(e){null==e.lastRunningProgressTask?this.progressTask=e.lastFinishedProgressTask:this.progressTask=e.lastRunningProgressTask},getLatestTaskInfo:function(){var e=this;this.axios.get("/tracer/latest-progress").then((function(t){e.updateTask(t.data)}))},successRate:function(e){return 0==e.crawlCount?"-":(100-e.crawlFailed/e.crawlCount*100).toFixed(2)+"%"}}},u=i,l=s("2877"),c=s("6544"),g=s.n(c),d=s("62ad"),h=s("a523"),p=s("8fea"),T=s("0fd9"),f=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=f.exports;g()(f,{VCol:d["a"],VContainer:h["a"],VDataTable:p["a"],VRow:T["a"]})}}]);