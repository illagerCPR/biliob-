(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208732"],{a59a:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("VContainer",[e("VRow",[e("VCol",[e("BiliobCard",{attrs:{light:"",border:"bottom",title:"榜首粉丝实时差距"}},[e("VRow",[e("VCol",{staticClass:"text-center"},[e("div",[t._v("粉丝数")]),e("VOdometer",{staticClass:"font-weight-black blue--text text--darken-1 sub-title",attrs:{value:t.aFans,format:"(,ddd).d"}}),e("div",{staticStyle:{"text-align":"center"}},[e("VAvatar",{attrs:{size:100},on:{click:function(a){return a.stopPropagation(),t.jumpToAuthorPage(t.aMid)}}},[e("VImg",{attrs:{src:t.zipPic(t.aFace.replace("http:","")),"lazy-src":t.zipPic(t.aFace.replace("http:",""))}})],1)],1),e("div",{class:"title grey--text ",staticStyle:{"text-align":"center","margin-top":"10px"}},[t._v(" "+t._s(t.aName)+" ")])],1),e("VCol",{staticClass:"text-center vs-text"},[t.$vuetify.breakpoint.mdAndDown?e("div",{staticClass:"display-3 font-weight-black red--text "},[t._v(" VS ")]):t._e(),t.$vuetify.breakpoint.lgAndUp?e("div",{staticClass:"display-4 font-weight-black red--text "},[t._v(" VS ")]):t._e(),e("div",{staticClass:"title"},[t._v(" 实时差距 ")]),e("div",[e("CommonVOdometer",{staticClass:"font-weight-black blue--text text--darken-1 title",attrs:{value:t.deltaFans,format:"(,ddd).d"}})],1)]),e("VCol",{staticClass:"text-center"},[e("div",[t._v("粉丝数")]),e("VOdometer",{staticClass:"font-weight-black blue--text text--darken-1 sub-title",attrs:{value:t.bFans,format:"(,ddd).d"}}),e("div",{staticStyle:{"text-align":"center"}},[e("VAvatar",{staticStyle:{"text-align":"center"},attrs:{size:"100"},on:{click:function(a){return a.stopPropagation(),t.jumpToAuthorPage(t.bMid)}}},[e("VImg",{attrs:{src:t.zipPic(t.bFace.replace("http:","")),"lazy-src":t.zipPic(t.bFace.replace("http:",""))}})],1)],1),e("div",{class:"title grey--text ",staticStyle:{"text-align":"center","margin-top":"10px"}},[t._v(" "+t._s(t.bName)+" ")])],1)],1)],1)],1)],1),e("DetailCharts",{attrs:{title:"实时粉丝数变化 - 十分钟变化情况","sub-sub-title":t.aName+" VS "+t.bName,options:t.fansVersusOptions}})],1)},i=[],r=(e("b0c0"),e("c57a")),s=(e("4160"),e("d81d"),e("b64b"),e("159b"),e("70f2")),o=e("c8d5");function c(t){return o(t).getTime()}function l(t,a,e,n){var i=[{},{}];[[t,e],[a,n]].forEach((function(t){var a=t[0],n=8;a.map((function(t){var a;"string"==typeof t.datetime&&(a=o(t.datetime),a.setHours(a.getHours()-n),t.datetime=a);return t}));var r=t[1],l=1;r==e&&(l=0);var d=o(a[0].datetime).getTime();d-=d%6e4;for(var u=1;u<a.length-1;u++){var f=a[u],m=a[u-1],b=a[u+1],h=c(s(m.datetime)),p=c(s(f.datetime)),g=c(s(b.datetime)),v=c(m.fans),x=f.fans,V=b.fans;while(p<d){var y=(v-x)/(h-p)*(d-p)+x;i[l][s(d,"HH:mm")]=Math.round(y),d-=6e4}while(p>d&&g<d-6e4){var D=(x-V)/(p-g)*(d-g)+V;i[l][s(d,"HH:mm")]=Math.round(D),d-=6e4}}}));var r=Object.keys(i[0]),l=[];r.forEach((function(t,a){var e=i[0][r[a]]-i[0][r[a+10]],n=i[1][r[a]]-i[1][r[a+10]];n-e&&l.unshift([t,e-n])})),l.unshift(["date","da","db","d"]);var d={dataset:{source:l},title:{left:"center"},legend:{data:[e,n],bottom:"5px"},grid:{left:"10px",right:"50px",top:"10px",containLabel:!0},axisLabel:{},tooltip:{trigger:"axis",confine:!0,axisPointer:{label:{formatter:function(t){return t.value}}}},xAxis:{type:"category"},yAxis:[{type:"value",axisLabel:{formatter:function(t){return t>1e4?Math.round(t/100)/100+"万":t}},splitLine:{show:!0}}],series:[{name:"差距变化",smooth:!0,showSymbol:!1,type:"bar",animationDelay:function(t){return 10*t}}],animationEasing:"elasticOut",animationDelayUpdate:function(t){return 5*t}};return d}var d=l,u=e("bfa6"),f={components:{VOdometer:r["default"],DetailCharts:u["default"]},data:function(){return{aOfficial:String(),aName:String(),aFace:String(),bOfficial:String(),bName:String(),bFace:String(),aData:[],bData:[],counter:0,fansVersusOptions:Object(),aggregateParam:60}},computed:{deltaFans:function(){return 0!=this.aFans&&0!=this.bFans?this.aFans-this.bFans:0},aMid:function(){return this.$route.query.aMid},bMid:function(){return this.$route.query.bMid},aFans:function(){return 0==this.aData.length?0:this.aData[0].fans},bFans:function(){return 0==this.aData.length?0:this.bData[0].fans}},mounted:function(){var t=this;this.axios.get("/author/top").then((function(a){t.aName=a.data[0].name,t.aFace=a.data[0].face,t.aData=a.data[0].data,t.bName=a.data[1].name,t.bFace=a.data[1].face,t.bData=a.data[1].data,t.fansVersusOptions=d(t.aData,t.bData,t.aName,t.bName)}));var a=setInterval(this.refresh,6e4);this.$once("hook:beforeDestroy",(function(){clearInterval(a)}))},methods:{jumpToAuthorPage:function(t){this.$router.push("/author/".concat(t))},refresh:function(){var t=this;this.axios.get("/author/top/refresh").then((function(a){if(t.aName=a.data[0].name,t.aFace=a.data[0].face,t.bName=a.data[1].name,t.bFace=a.data[1].face,a.data[0].name!=t.aName){var e=t.aData;t.aData=t.bData,t.bData=e}t.aData.unshift(a.data[0].data[0]),t.bData.unshift(a.data[1].data[0]),t.fansVersusOptions=d(t.aData,t.bData,t.aName,t.bName)}))}}},m=f,b=e("2877"),h=e("6544"),p=e.n(h),g=e("8212"),v=e("62ad"),x=e("a523"),V=e("adda"),y=e("0fd9"),D=Object(b["a"])(m,n,i,!1,null,null,null);a["default"]=D.exports;p()(D,{VAvatar:g["a"],VCol:v["a"],VContainer:x["a"],VImg:V["a"],VRow:y["a"]})}}]);