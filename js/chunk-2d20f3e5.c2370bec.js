(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f3e5"],{b397:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BiliobCard",{attrs:{title:"个人信息",light:"",border:"bottom "}},[i("VDialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("VCard",[i("VCardTitle",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" "+e._s(e.type)+" ")]),"修改昵称"==e.type?i("VCardText",[i("VRow",[i("VCol",[e._v(" 注：修改一次需要消耗50点积分 ")]),i("VCol",{attrs:{cols:"12"}},[i("VTextField",{attrs:{label:"新的昵称",counter:20,required:"",rules:[e.rules.required,e.rules.max]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.newNickName,callback:function(t){e.newNickName=t},expression:"newNickName"}})],1)],1)],1):"修改邮箱"==e.type?i("VCardText",[i("VRow",[i("VCol",[e._v(" 注：修改一次需要消耗50点积分 ")]),i("VCol",{attrs:{cols:"12"}},[i("VTextField",{attrs:{label:"新的邮箱",counter:20,required:"",rules:[e.rules.required,e.rules.max]},model:{value:e.newMail,callback:function(t){e.newMail=t},expression:"newMail"}}),i("BiliobActiveCodeTextField",{attrs:{mail:e.newMail},model:{value:e.activationCode,callback:function(t){e.activationCode=t},expression:"activationCode"}})],1)],1)],1):e._e(),i("VDivider"),i("VCardActions",[i("div",{staticClass:"flex-grow-1"}),i("VBtn",{attrs:{color:"primary",text:""},nativeOn:{click:function(t){t.preventDefault(),e.dialog=!1}}},[e._v(" 取消操作 ")]),i("VBtn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return t.preventDefault(),e.submit()}}},[e._v(" 确认修改 ")])],1)],1)],1),i("VContainer",[i("VRow",[i("VCol",{attrs:{cols:"12"}},[i("VTextField",{attrs:{outlined:"",disabled:"",counter:20,label:"头衔",messages:"根据观测者经验值计算得出",required:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),i("VRow",[i("VCol",{attrs:{cols:"12"}},[i("VTextField",{attrs:{disabled:"",outlined:"",counter:20,label:"用户名",messages:"登陆凭证之一，不可修改。",required:""},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1)],1),i("VRow",[i("VCol",{staticClass:"flex-grow-1"},[i("VTextField",{attrs:{counter:20,outlined:"",label:"昵称",messages:"观测者显示的名称。",required:"","append-outer-icon":"mdi-rename-box"},on:{"click:append-outer":e.changeNickName},model:{value:e.newNickName,callback:function(t){e.newNickName=t},expression:"newNickName"}})],1)],1),i("VRow",[i("VCol",{attrs:{cols:"12"}},[i("VTextField",{attrs:{outlined:"",rules:e.mailRules,label:"E-mail",messages:"用于登陆。",required:"","append-outer-icon":"mdi-rename-box"},on:{"click:append-outer":e.changeEmail},model:{value:e.newMail,callback:function(t){e.newMail=t},expression:"newMail"}})],1)],1)],1)],1)},n=[],o=i("f3f3"),l=void 0,r={data:function(){return{dialog:!1,newNickName:"",newMail:"",activationCode:"",type:"",mailRules:[function(e){return!!e||"邮箱不得为空"},function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"这不是一个合法的邮箱！"}],rules:{required:function(e){return!!e||"该项不可或缺！"},min:function(e){return e.length>=6||"再长长长长长点"},max:function(e){return e.length<=20||"太长了！"},passwdMatch:function(e){return e===l.password||"貌似两次输入不一致..手速太快了？"},email:function(e){return l.mailVerification(e)||"这不是一个合法的邮箱！"}}}},computed:{userName:function(){return this.$store.getters.getUserName},title:function(){return this.$store.getters.getTitle}},mounted:function(){this.newNickName=this.$db.user.nickName,this.newMail=this.$db.user.mail},methods:{changeEmail:function(){this.type="修改邮箱",this.dialog=!0},changeNickName:function(){this.type="修改昵称",this.dialog=!0},submit:function(){var e=this;if("修改昵称"==this.type)var t="/user/nickname",i="新昵称和原昵称相同",a=this.nickName,n=this.newNickName,l={nickName:this.newNickName},r="post",s="setNickName";else"修改邮箱"==this.type&&(t="/user/mail",i="新邮箱和原邮箱相同",r="put",a=this.mail,n=this.newMail,l={mail:this.newMail,activationCode:this.activationCode},s="setMail");a==n?this.$store.commit("showMessage",{msg:i,color:"error"}):this.axios({method:r,url:t,data:Object(o["a"])({},l)}).then((function(t){e.msg=t.data.msg,e.$store.commit(s,n),e.$store.commit("showMessage",{msg:t.data.msg,color:"info"})})).catch((function(t){e.$store.commit("showMessage",{msg:t.response.data.msg,color:"error"})})),this.dialog=!1}}},s=r,c=i("2877"),u=i("6544"),d=i.n(u),m=i("8336"),f=i("b0af"),h=i("99d9"),p=i("62ad"),w=i("a523"),V=i("169a"),g=i("ce7e"),k=i("0fd9"),b=i("8654"),N=Object(c["a"])(s,a,n,!1,null,null,null);t["default"]=N.exports;d()(N,{VBtn:m["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:p["a"],VContainer:w["a"],VDialog:V["a"],VDivider:g["a"],VRow:k["a"],VTextField:b["a"]})}}]);