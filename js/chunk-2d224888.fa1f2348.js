(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d224888"],{e117:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VContainer",[a("VRow",[a("VCol",{attrs:{cols:"12",lg:"4"}},[a("AdminStatsCard",{attrs:{value:t.spiderTasks.length,title:"正在爬取爬虫数","small-value":"个",icon:"mdi-spider-web","sub-icon":"mdi-check-circle","sub-text":"正常运行中...","sub-text-color":"green",color:"green"}})],1),a("VCol",{attrs:{cols:"12",lg:"4"}},[a("AdminCrawlCard",{attrs:{title:"作者爬虫运行状况",value:t.authorListLength}})],1),a("VCol",{attrs:{cols:"12",lg:"4"}},[a("AdminCrawlCard",{attrs:{title:"视频爬虫运行状况",value:t.videoListLength}})],1)],1),a("VRow",[a("VCol",[a("BiliobCard",{attrs:{title:"运行中爬虫详细信息",text:"此处显示的是目前正在运行中的爬虫状态",border:"bottom",light:""}},[a("VDataTable",{attrs:{headers:t.headers,items:t.spiderTasks},scopedSlots:t._u([{key:"headerCell",fn:function(e){var s=e.header;return[a("span",{staticClass:"subheading font-weight-light text-success ",domProps:{textContent:t._s(s.text)}})]}},{key:"items",fn:function(e){var s=e.item;return[a("td",[t._v(t._s(s.taskName))]),a("td",[t._v(t._s(s.computerName))]),a("td",[t._v(t._s(s.crawlCount))]),a("td",[t._v(t._s(t.successRate(s)))]),a("td",[t._v(t._s(t.lastTime(s.startTime,s.updateTime)))])]}}])})],1)],1)],1)],1)},r=[],n=(a("d81d"),a("b680"),a("340b")),o=a("f2d3"),i={data:function(){return{spiderTasks:Array(),headers:[{text:"爬虫名称",value:"taskName"},{text:"服务器名称",value:"computerName"},{text:"爬取次数",value:"crawlCount"},{text:"成功率",value:"successRate"},{text:"持续运行时间",value:"lastTime"}],authorListLength:"",videoListLength:""}},computed:{progressColor:function(){switch(null!=this.progressTask&&this.progressTask.status){case 9:return"green";case 4:return"red";case 2:return"orange";default:return""}}},mounted:function(){var t=this;this.axios("/tracer/spider-tasks?type=1").then((function(e){t.spiderTasks=e.data.content.map((function(e){return{taskName:e.taskName,computerName:e.computerName,crawlCount:e.crawlCount,successRate:t.successRate(e),lastTime:t.lastTime(e.startTime,e.updateTime)}}))})),this.axios("/tracer/author-queue").then((function(e){t.authorListLength=e.data.length})),this.axios("/tracer/video-queue").then((function(e){t.videoListLength=e.data.length}));var e=setInterval(this.getLatestSpiderInfo,5e3);this.$once("hook:beforeDestroy",(function(){clearInterval(e)}))},methods:{getLatestSpiderInfo:function(){var t=this;this.axios.get("/tracer/latest-spider").then((function(e){t.authorCrawlLength=e.data.authorCrawlLength,t.authorCrawlLength=e.data.videoCrawlLength}))},lastTime:function(t,e){return Object(n["distanceInWords"])(t,e,{locale:o})},getStatus:function(t){return"0"===t?"队列空闲中":"正在消化爬取队列"},getColor:function(t){return 0===t||""===t?"green":"orange"},successRate:function(t){return 0==t.crawlCount?"-":(100-t.crawlFailed/t.crawlCount*100).toFixed(2)+"%"}}},u=i,l=a("2877"),c=a("6544"),d=a.n(c),h=a("62ad"),m=a("a523"),g=a("8fea"),f=a("0fd9"),p=Object(l["a"])(u,s,r,!1,null,null,null);e["default"]=p.exports;d()(p,{VCol:h["a"],VContainer:m["a"],VDataTable:g["a"],VRow:f["a"]})}}]);